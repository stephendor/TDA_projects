# TDA Backend Configuration Example
# Copy to .env and modify as needed

# =============================================================================
# API Configuration
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=true
API_DEBUG=true

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# =============================================================================
# Database Configuration
# =============================================================================
DATABASE_URL=postgresql+asyncpg://tda_user:tda_password@localhost:5432/tda_platform
DATABASE_POOL_SIZE=20
DATABASE_POOL_OVERFLOW=30

# =============================================================================
# Redis Configuration  
# =============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=50
REDIS_RETRY_ON_TIMEOUT=true

# =============================================================================
# Kafka Configuration
# =============================================================================
KAFKA_BOOTSTRAP_SERVERS=localhost:9092,localhost:9093,localhost:9094
KAFKA_TOPIC_PREFIX=tda_
KAFKA_CONSUMER_GROUP=tda_backend
KAFKA_AUTO_OFFSET_RESET=earliest
KAFKA_ENABLE_AUTO_COMMIT=false
KAFKA_SESSION_TIMEOUT_MS=30000
KAFKA_HEARTBEAT_INTERVAL_MS=10000

# Kafka Topics
KAFKA_TOPIC_TDA_JOBS=tda_jobs
KAFKA_TOPIC_TDA_RESULTS=tda_results  
KAFKA_TOPIC_TDA_EVENTS=tda_events
KAFKA_TOPIC_STREAM_DATA=stream_data

# =============================================================================
# Apache Flink Configuration
# =============================================================================
FLINK_REST_URL=http://localhost:8081
FLINK_PARALLELISM=2
FLINK_CHECKPOINT_INTERVAL=30000
FLINK_STATE_BACKEND=filesystem
FLINK_STATE_CHECKPOINT_DIR=file:///tmp/flink-checkpoints

# =============================================================================
# Security Configuration
# =============================================================================
SECRET_KEY=your-secret-key-change-this-in-production
API_KEY_HEADER=X-API-Key
JWT_SECRET_KEY=your-jwt-secret-key-change-this
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=30

# Rate Limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/tda-backend.log
LOG_MAX_SIZE=10MB
LOG_BACKUP_COUNT=5

# =============================================================================
# Monitoring Configuration
# =============================================================================
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus_multiproc
METRICS_ENABLED=true
TRACING_ENABLED=false
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=14268

# =============================================================================
# TDA Core Configuration  
# =============================================================================
TDA_MAX_POINTS=1000000
TDA_MAX_DIMENSION=3
TDA_TIMEOUT_SECONDS=300
TDA_RESULT_CACHE_TTL=3600

# Computation limits
MAX_CONCURRENT_JOBS=10
JOB_CLEANUP_INTERVAL=300
RESULT_RETENTION_DAYS=7

# =============================================================================
# C++ Integration Configuration
# =============================================================================
CPP_LIBRARY_PATH=../build/lib
CPP_THREAD_COUNT=0  # 0 = auto-detect
CPP_MEMORY_LIMIT_GB=8

# =============================================================================
# File Upload Configuration  
# =============================================================================
UPLOAD_MAX_SIZE=100MB
UPLOAD_ALLOWED_EXTENSIONS=.json,.csv,.npz,.h5
UPLOAD_DIR=/tmp/tda-uploads
UPLOAD_CLEANUP_HOURS=24

# =============================================================================
# Development Configuration
# =============================================================================
ENVIRONMENT=development
DEBUG_SQL=false
DEBUG_KAFKA=false
TESTING=false

# Mock external services in development
MOCK_FLINK=false
MOCK_KAFKA=false

# =============================================================================
# Production Configuration (commented out for development)  
# =============================================================================
# ENVIRONMENT=production
# API_DEBUG=false
# API_RELOAD=false
# LOG_LEVEL=WARNING
# DATABASE_POOL_SIZE=50
# REDIS_MAX_CONNECTIONS=100
# API_WORKERS=8